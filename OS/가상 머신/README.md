# 가상 머신(Virtual Machine)

<br>

### 가상머신이란?

- `가상 머신`의 기본 개념은 하나의 컴퓨터의 `CPU`, `메모리`, `디스크`, `네트워크 인터페이스 카드` 등의 `하드웨어`를 여러 가지 실행 환경으로 `추상화`하여 각각의 환경이 자신의 컴퓨터에 연결되어 실행되고 있다는 착각을 불러 일으키는 것을 의미합니다.
- 즉, CPU, 메모리, 스토리지, 네트워크 인터페이스와 같은 물리적 리소스를 여러 운영 체제가 공유하면서 동시에 사용할 수 있는 것을 의미합니다.
- 일반적으로 하나의 운영체제가 모든 하드웨어 자원을 차지하지만, 가상머신 환경에서는 여러 개의 운영체제가 하드웨어를 공유할 수 있는 특성을 가집니다.
- 가상 머신은 다음과 같은 4가지 구성요소로 이루어집니다.
    - 첫 번째로 `호스트 서버`입니다.
        - 호스트 서버는 가상머신이 작동하는 데 필요한 CPU, 메모리, 디스크와 같은 하드웨어 자원을 제공하는 물리적 서버를 의미합니다.
    - 두 번째로 `호스트 운영체제`입니다.
        - 호스트 운영체제는 가상머신과 하이퍼 바이저가 작동하는 운영환경을 의미합니다.
        - 예를 들어 `VMware` 와 같은 하이퍼바이저를 사용하여 `Mac OS`에서 `Windows Virtual Machine`을 실행하는 경우 Mac OS는 호스트 OS이고 Windows OS는 VM 내부에서 실행되는 게스트 OS입니다.
        - 하지만, 여기에서 주의할 것은 호스트 운영체제 자체는 일반적인 운영체제와 동일하다는 점입니다.
    - 세 번째로 `하이퍼 바이저`입니다.
        - 하이퍼 바이저는 가상 머신을 생성하고 관리하는 소프트웨어입니다.
        - 또한, 하이퍼바이저는 물리적인 하드웨어와 가상 머신 간의 `인터페이스`를 담당하는 소프트웨어로, 개별 가상 머신에 하드웨어 자원을 할당해주는 역할을 합니다.
        - 하이퍼 바이저는 1형과 2형 이 두 가지 종류로 나뉘게 되는데,
            - 1형 하이퍼 바이저는 운영체제 없이 호스트 서버 위에 직접 설치 되어서 하드웨어 자원을 직접 사용하는 특징을 가지고 있고,
            - 2형 하이퍼 바이저는 호스트 운영체제 아래 설치되고 가상 머신을 생성할 때, CPU, 메모리, 저장치와 같은 가상 하드웨어 자원을 생성합니다.
            - 이 때, 가상 하드웨어 자원은 `하드웨어 에뮬레이터`를 통해서 소프트웨어적으로 실제 하드웨어 자원과 연결됩니다.
        - 이를 미루어 짐작해봤을 때, 호스트 서버의 하드웨어 구성요소는 동적으로 할당된다는 것을 알 수 있습니다.
    - 네 번째로 `게스트 서버`입니다.
        - 게스트 서버는 물리적 호스트 서버에서 실행되는 가상의 실행 환경을 의미합니다.
        - 게스트 서버는 가상 하드웨어 자원과 운영 체제 하에 응용 프로그램 및 서비스로 구성이 됩니다.
        - 게스트 서버 내에 가상 네트워크 인터페이스가 있어 호스트 서버 및 외부와 통신할 수 있는 특성을 가지고 있습니다.
        - 게스트 서버는 다음과 같은 2가지 특징을 가지고 있습니다.
            - 게스트 서버는 서버 간 `격리성`을 가지기 때문에 바이러스와 같은 문제가 생기더라도 다른 게스트 서버나 호스트서버에 영향을 주지 않는 특징을 가지고 있습니다.
            - 게스트 서버는 하이퍼바이저와 `통합`되어 가상 하드웨어 리소스에 대한 관리 및 제어는 물론 스냅샷, 마이그레이션, 백업 및 복구와 같은 기능을 제공할 수 있는 특징을 가지고 있습니다.
        - 여기에서, 게스트 운영체제는 일반적인 운영체제와 동일하게 CPU 스케쥴링, 메모리 관리, I/O, 스토리지 관리 등의 작업을 수행합니다.
- 다음은 가장 널리 사용되고 있는 가상 머신인 VMware의 구조입니다.
    
  <img width="700" src="https://user-images.githubusercontent.com/88137420/226522765-90b96caf-763b-4831-8bf9-64deda7148ce.png" />

<br>

*<참고 자료>*

- 운영체제(Operatating System) 10판 - Chapter 18 가상머신
