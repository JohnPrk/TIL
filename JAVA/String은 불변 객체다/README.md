# String은 불변 객체다!

<br>


### ‘String’의 정의?

- 자바의 공식 문서에 보면 알 수 있는데, String은 명시되지는 않았지만 `Object`를 상속받는 `파이널 클래스`입니다.
- 클래스가 `final`로 선언되면 해당 클래스는 상속 받을 수 없다는 것을 보장합니다.
- 또한 final로 선언된 클래스는 클래스 내부의 변수나 메서드도 수정할 수 없습니다.
- 즉, String 클래스는 재정의 되거나 수정될 수 없다는 특징을 가지고 있습니다.
    
    <img width="700" alt="Untitled" src="https://user-images.githubusercontent.com/88137420/230521643-174e238f-2c19-49fb-99c4-54c7726a98e8.png">
    
- 따라서 자바에서 String 클래스는 `프리미티브 타입`이 아니라 `레퍼런스 타입`이라고 할 수 있습니다.
- 즉, String 클래스는 `하나의 인스턴스`로 표현되기 때문에, Stack 메모리에는 `참조값`(주소값)만 있고, 실제값은 Heap 메모리에 존재한다고 할 수 있습니다.
- 하지만, 대부분의 경우 우리는 인스턴스를 직접 만들지 않고 `리터럴`을 사용한다고 할 수 있습니다.
- 이러한 리터럴은 다양한 장점이 있는데, 이 후에 다룰 문자열 상수 풀에 사용 되어서 성능상의 이점을 가질 수 있습니다.
- 마지막으로 Java에서 String은 `불변 객체`입니다.

<br>

### 불변 객체란?

- 불변 객체란 객체가 인스턴스로 만들어지게 되면 객체의 생명주기 동안 내부의 모든 값들이 `변하지 않는다 것`을 의미합니다.

<br>

### Java에서 String이 불변 객체인 이유는 무엇입니까?

- 스트링이 불변으로 설계 됨으로 인한 주요 이점은 `캐싱`, `보안`, `동기화`입니다.

<br>

### 캐싱 → String 상수 풀

- Java에서는 더 나은 성능을 위해 문자열 값을 `힙 메모리 영역`의 문자열 상수 풀에 보관하고 있습니다.
- 쉽게 이야기하자면, 두 문자열의 값이 같으면 Java는 `새로운 개체`를 만들지 않고 문자열 상수 풀에 있는 `동일한 개체`를 연결해서 사용한다는 것을 의미합니다.
- 이를 통해서 힙 메모리 공간을 절약하고 성능상의 이점을 가지게 됩니다.
- 쉽게 이야기하자면, 문자열 상수 풀을 사용하면 `문자열 개체 생성` 및 `가비지 컬렉터 수집 횟수`가 줄어들기 때문에 성능상의 이점을 가질 수 있습니다.

  ![https://www.baeldung.com/wp-content/uploads/2018/08/Why_String_Is_Immutable_In_Java.jpg](https://www.baeldung.com/wp-content/uploads/2018/08/Why_String_Is_Immutable_In_Java.jpg)

<br>

### 보안

- String은 `사용자 이름`, `암호`, `URL` 등과 같은 민감한 정보를 저장하는데 자주 사용 됩니다.
- 또한 사용자가 작성한 코드는 JVM의 `클래스 로더`를 통해 `바이트 코드`로 변환되거나 `네트워크`를 통해서 전달 되어지면서 `변조의 위험성`을 가지게 됩니다.
- 하지만, String은 불변 객체이기 때문에 이러한 여러가지 송, 수신 과정에서 값이 변경되지 않는다는 이점을 가질 수 있습니다.

<br>

### 동기화

- 자바 같은 경우에 `멀티 스레드 환경`이기 때문에 공유 자원에 대해서는 `동시성 문제`를 해결하는 `동기화 작업`을 고려해야합니다.
- 하지만, 문자열은 불변 객체이기 때문에 동기화할 필요 없이 여러 스레드에서 안전하게 `공유`할 수 있다는 장점을 가지고 있습니다.

<br>

### 정리

- 요약하면 Java의 String은 보안, 스레드 안전성, 캐싱 및 성능상의 이점을 가질 수 있도록 설계된 불변 객체라고 할 수 있을 것 같습니다.

<br>
